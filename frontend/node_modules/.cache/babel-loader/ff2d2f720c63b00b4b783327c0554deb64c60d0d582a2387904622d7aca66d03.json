{"ast":null,"code":"import _toConsumableArray from\"D:/tg/backend/tuyxona/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"D:/tg/backend/tuyxona/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import Card from'../component/Card';import Carusel from\"../component/Carusel\";import{setRestaurant}from'../redux/reducers/restaurant.js';import{useSelector,useDispatch}from'react-redux';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Home(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),load=_useState2[0],setLoad=_useState2[1];var dispatch=useDispatch();var restaurants=useSelector(function(state){return state.restaurant.array;});var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),query=_useState4[0],setQuery=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),results=_useState6[0],setResults=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),sortArr=_useState8[0],setSortArr=_useState8[1];var restaurantsSort=function restaurantsSort(e){var _ref;e.preventDefault();setSortArr((_ref=_toConsumableArray(restaurants))===null||_ref===void 0?void 0:_ref.sort(function(a,b){return a.price-b.price;}));};var reverseRestaurantsSort=function reverseRestaurantsSort(e){var _ref2;e.preventDefault();setSortArr((_ref2=_toConsumableArray(restaurants))===null||_ref2===void 0?void 0:_ref2.sort(function(a,b){return b.price-a.price;}));};var handleInputChange=function handleInputChange(event){setQuery(event.target.value);if(event.target.value.length>=2){var regex=new RegExp(\"\".concat(event.target.value),'i');var newResult=restaurants===null||restaurants===void 0?void 0:restaurants.filter(function(weddinghall){return regex.test(weddinghall.name);});console.log(newResult);setResults(newResult);}else{setResults([]);}};useEffect(function(){axios.get('https://toyxona-app.onrender.com/restaurant').then(function(res){dispatch(setRestaurant(res.data));setLoad(true);});return function(){setLoad(false);};},[]);return/*#__PURE__*/_jsx(_Fragment,{children:load?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid mt-5\",children:/*#__PURE__*/_jsx(Carusel,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"container d-flex\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control  m-2\",value:query,onChange:handleInputChange,type:\"search\",placeholder:\"Search\",\"aria-label\":\"Search\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form-check mt-2 \",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-secondary\",onClick:restaurantsSort,for:\"flexRadioDefault1\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bx fs-4 bx-trending-up\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-check mt-2 \",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-secondary\",onClick:reverseRestaurantsSort,for:\"flexRadioDefault2\",children:/*#__PURE__*/_jsx(\"i\",{className:\"bx fs-4 bx-trending-down\"})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row  mt-4 \",children:results.length===0&&sortArr.length===0?restaurants===null||restaurants===void 0?void 0:restaurants.map(function(restaurant){return/*#__PURE__*/_jsx(Card,{data:restaurant},restaurant._id);}):results.length===0&&sortArr.length>0?sortArr===null||sortArr===void 0?void 0:sortArr.map(function(restaurant){return/*#__PURE__*/_jsx(Card,{data:restaurant},restaurant._id);}):results===null||results===void 0?void 0:results.map(function(restaurant){return/*#__PURE__*/_jsx(Card,{data:restaurant},restaurant._id);})})})]}):/*#__PURE__*/_jsx(\"h1\",{style:{height:\"80vh\"},className:\"w-100\",children:/*#__PURE__*/_jsx(\"i\",{style:{position:\"fixed\",top:\"45vh\",left:\"50vw\",zIndex:12,fontSize:\"100px\"},className:\"bx bx-loader bx-spin bx-flip-horizontal\"})})});}export default Home;","map":{"version":3,"names":["React","useEffect","useState","Card","Carusel","setRestaurant","useSelector","useDispatch","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Home","_useState","_useState2","_slicedToArray","load","setLoad","dispatch","restaurants","state","restaurant","array","_useState3","_useState4","query","setQuery","_useState5","_useState6","results","setResults","_useState7","_useState8","sortArr","setSortArr","restaurantsSort","e","_ref","preventDefault","_toConsumableArray","sort","a","b","price","reverseRestaurantsSort","_ref2","handleInputChange","event","target","value","length","regex","RegExp","concat","newResult","filter","weddinghall","test","name","console","log","get","then","res","data","children","className","onChange","type","placeholder","onClick","for","map","_id","style","height","position","top","left","zIndex","fontSize"],"sources":["D:/tg/backend/tuyxona/frontend/src/pages/Home.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport Card from '../component/Card'\r\nimport Carusel from \"../component/Carusel\";\r\nimport { setRestaurant } from '../redux/reducers/restaurant.js';\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport axios from 'axios'\r\nfunction Home() {\r\n  const [load, setLoad] = useState(false)\r\n  const dispatch = useDispatch();\r\n  const restaurants = useSelector(state => state.restaurant.array);\r\n  const [query, setQuery] = useState('');\r\n  const [results, setResults] = useState([]);\r\n  const [sortArr, setSortArr] = useState([]);\r\n  const restaurantsSort = (e) => {\r\n    e.preventDefault()\r\n    setSortArr([...restaurants]?.sort((a, b) => a.price - b.price))\r\n  }\r\n  const reverseRestaurantsSort = (e) => {\r\n    e.preventDefault()\r\n    setSortArr([...restaurants]?.sort((a, b) => b.price - a.price))\r\n  }\r\n\r\n\r\n  const handleInputChange = (event) => {\r\n    setQuery(event.target.value);\r\n    if (event.target.value.length >= 2) {\r\n      const regex = new RegExp(`${event.target.value}`, 'i');\r\n      const newResult = restaurants?.filter((weddinghall) => regex.test(weddinghall.name));\r\n      console.log(newResult)\r\n      setResults(newResult);\r\n    } else {\r\n      setResults([]);\r\n    }\r\n  };\r\n  useEffect(  () => {\r\n\r\n    axios\r\n      .get('https://toyxona-app.onrender.com/restaurant')\r\n      .then(res => {\r\n        dispatch(setRestaurant(res.data))\r\n        setLoad(true)\r\n      })\r\n      return () => {\r\n        setLoad(false)\r\n      }\r\n\r\n  \r\n  }, [])\r\n  return (\r\n    <>{\r\n      load ? <>\r\n        <div className=\"container-fluid mt-5\">\r\n          <Carusel />\r\n        </div>\r\n        <div className=\"container d-flex\">\r\n          <input className=\"form-control  m-2\" value={query} onChange={handleInputChange} type=\"search\" placeholder=\"Search\" aria-label=\"Search\" />\r\n          <div className=\"form-check mt-2 \">\r\n            <button className=\"btn btn-outline-secondary\" onClick={restaurantsSort} for=\"flexRadioDefault1\">\r\n              <i className='bx fs-4 bx-trending-up'></i>\r\n            </button>\r\n          </div>\r\n          <div className=\"form-check mt-2 \">\r\n            <button className=\"btn btn-outline-secondary\" onClick={reverseRestaurantsSort} for=\"flexRadioDefault2\">\r\n              <i className='bx fs-4 bx-trending-down'></i>\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div className=\"container\">\r\n          <div className=\"row  mt-4 \">\r\n            {\r\n              (results.length === 0 && sortArr.length === 0) ? restaurants?.map((restaurant) => {\r\n                return (\r\n                  <Card key={restaurant._id} data={restaurant} />\r\n                )\r\n              }) : (\r\n                (results.length === 0 && sortArr.length > 0) ? sortArr?.map((restaurant) => {\r\n                  return (\r\n                    <Card key={restaurant._id} data={restaurant} />\r\n                  )\r\n                }) : results?.map((restaurant) => {\r\n                  return (\r\n                    <Card key={restaurant._id} data={restaurant} />\r\n                  )\r\n                })\r\n              )\r\n            }\r\n          </div>\r\n        </div>\r\n      </> :\r\n        <h1 style={{ height: \"80vh\" }} className='w-100'>\r\n          <i style={{ position: \"fixed\", top: \"45vh\", left: \"50vw\", zIndex: 12, fontSize: \"100px\" }} className='bx bx-loader bx-spin bx-flip-horizontal' ></i>\r\n        </h1>\r\n    }\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Home"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}